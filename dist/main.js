!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["kmeans-js"]=n():e["kmeans-js"]=n()}(global,function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)r.d(t,a,function(n){return e[n]}.bind(null,a));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=1)}([function(e,n,r){"use strict";var t=r(2);n.findAverageMeanSeparation=function(e){for(var r=0,t=0,a=e.length,o=0;o<a-1;o++)for(var i=o+1;i<a;i++)r+=n.distance(e[o],e[i]),t++;return r/t},n.findAverageDistancePointToMean=function(e,r,t){if(e.length!=t.length)throw"points and assignments arrays must be of same dimension";for(var a=0,o=e.length,i=0;i<o;i++){var s=r[t[i]];a+=n.distance(e[i],s)}return a/o},n.countPointsPerMean=function(e){for(var n={},r=0,t=e.length;r<t;r++){var a=e[r];n[a]?n[a]++:n[a]=1}return n},n.algorithm=function(e,r,t){for(var a=[],o=0;o<r;o++){var i=e[Math.floor(Math.random()*e.length)];a.push(i.slice(0))}var s,u,f=n.assignPointsToMeans(e,a),l=0;do{n.moveMeansToCenters(e,f,a),s=f,f=n.assignPointsToMeans(e,a),u=n.countChangedAssignments(f,s),t&&t(u,l),l++}while(u>0);return{means:a,assignments:f,steps:l}},n.moveMeansToCenters=function(e,r,t){if(e.length!=r.length)throw"points and assignments arrays must be of same dimension";for(var a=0,o=t.length;a<o;a++){for(var i=[],s=0,u=r.length;s<u;s++)r[s]==a&&i.push(e[s]);i.length>0&&(t[a]=n.averagePosition(i))}return t},n.averagePosition=function(e){for(var n=e[0].slice(0),r=e.length,t=1;t<r;t++)for(var a=e[t],o=0,i=a.length;o<i;o++)n[o]+=a[o];for(var s=0,u=n.length;s<u;s++)n[s]/=r;return n},n.countChangedAssignments=function(e,n){if(e.length!=n.length)throw"old and new assignment arrays must be of same dimension";for(var r=0,t=0,a=e.length;t<a;t++)e[t]!=n[t]&&r++;return r},n.assignPointsToMeans=function(e,r){for(var t=[],a=0,o=e.length;a<o;a++)t.push(n.findClosestMean(e[a],r));return t},n.findClosestMean=function(e,r){for(var t=[],a=0,o=r.length;a<o;a++)t.push(n.distance(e,r[a]));return n.findIndexOfMinimum(t)},n.findIndexOfMinimum=function(e){for(var n=e[0],r=0,t=1,a=e.length;t<a;t++)e[t]<n&&(r=t,n=e[t]);return r},n.generateRandomPoints=function(e,n){t.init(e,4,1);for(var r=[],a=0;a<n;a++){var o=t.generatePoint();r.push(o)}return r},n.findRanges=function(e){for(var n=e[0],r=e.length,t=n.length,a=[],o=0;o<t;o++)a[o]=[n[o],n[o]];for(var i=1;i<r;i++){var s=e[i];for(o=0;o<t;o++)s[o]<a[o][0]&&(a[o][0]=s[o]),s[o]>a[o][1]&&(a[o][1]=s[o])}return a},n.distance=function(e,r){return Math.sqrt(n.squaredError(e,r))},n.squaredError=function(e,n){if(e.length!=n.length)throw"point1 and point2 must be of same dimension";for(var r=e.length,t=0,a=0;a<r;a++)t+=(e[a]-n[a])*(e[a]-n[a]);return t},n.sumSquaredError=function(e,r,t){if(e.length!=t.length)throw"points and assignments arrays must be of same dimension";for(var a=0,o=e.length,i=0;i<o;i++){var s=r[t[i]];a+=n.squaredError(e[i],s)}return a}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"dataset",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"phamBestK",{enumerable:!0,get:function(){return o.default}}),n.default=void 0;var t=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};t.get||t.set?Object.defineProperty(n,r,t):n[r]=e[r]}return n.default=e,n}(r(0)),a=i(r(3)),o=i(r(4));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.default;n.default=s},function(e,n,r){"use strict";function t(e,n,r,t,a){var o,i;do{i=0;for(var s=0;s<a;s++)i+=e+Math.random()*Number.MAX_VALUE%(n-e);i<0&&(i-=a-1),o=i/a}while(!(r<=o&&o<t));return o}var a;function o(e,n){for(var r=[],t=0,a=e.length;t<a;t++){var o=e[t],i=o[1]-o[0],s=o[0]+Math.random()*i,u=i/2+Math.random()*i/2*n,f={bmin:s-u/2,bmax:s+u/2,rmin:s-u/2,rmax:s+u/2,height:3};r.push(f)}return r}n.init=function(e,n,r){var t=r||1;a=[];for(var i=0;i<n;i++){var s=o(e,t);a.push(s)}return a},n.generateClusterCurveDescriptions=o,n.genrand=t,n.generatePoint=function(e){if(!a)return null;e||(e=Math.floor(Math.random()*a.length));for(var n=a[e],r=[],o=0,i=n.length;o<i;o++){var s=n[o];r.push(t(s.bmin,s.bmax,s.rmin,s.rmax,s.height))}return r}},function(e,n,r){"use strict";n.findRanges=function(e,n){for(var r={},t=0,a=n.length;t<a;t++){var o=n[t];for(var i in o){if(!r.hasOwnProperty(i)){var s={type:e[i]||"linear"};switch(s.type){case"discrete":s.values=[];break;case"linear":s.min=Number.MAX_VALUE,s.max=Number.MIN_VALUE}r[i]=s}var u=r[i],f=o[i];switch(u.type){case"discrete":-1==u.values.indexOf(f)&&u.values.push(f);break;case"linear":f>u.max&&(u.max=f),f<u.min&&(u.min=f)}}}for(var t in r)switch(r[t].type){case"linear":r[t].range=r[t].max-r[t].min}return r},n.normalize=function(e,n){for(var r=[],t=0,a=e.length;t<a;t++){var o=e[t],i=[];for(var s in o){var u=o[s],f=n[s];switch(f.type){case"discrete":for(var l=0,c=f.values.length;l<c;l++)f.values[l]==u?i.push(1):i.push(0);break;case"linear":i.push((u-f.min)/f.range)}}r.push(i)}return r},n.denormalizeDatum=function(e,n){var r={},t=0;for(var a in n){var o,i=e[t],s=n[a];switch(s.type){case"discrete":for(var u=s.values.length,f=e.slice(t,t+u),l=-1,c=Number.MIN_VALUE,h=0;h<u;h++)f[h]>c&&(c=f[h],l=h);o=s.values[l],t+=u;break;case"linear":o=s.min+i*s.range,t+=1}r[a]=o}return r}},function(e,n,r){"use strict";n.squaredError=function(e,n){if(e.length!=n.length)throw"point1 and point2 must be of same dimension";for(var r=e.length,t=0,a=0;a<r;a++)t+=(e[a]-n[a])*(e[a]-n[a]);return t},n.clusterDistortions=function(e,r,t){for(var a={},o=0,i=e.length;o<i;o++){var s=t[o];a.hasOwnProperty(s)||(a[s]=0),a[s]+=n.squaredError(e[o],r[s])}return a},n.totalDistortion=function(e,r,t){var a=n.clusterDistortions(e,r,t),o=0;for(var i in a)o+=a[i];return o},n.alpha=function(e,n){var r=e[0].length,t=e.length;if(!(t<2||r<=1))return 2==t?1-3/(4*r):n+(1-n)/6},n.f=function(e,r,t,a,o){var i=r.length,s=n.totalDistortion(e,r,t),u=n.alpha(r,a);return{K:i,distortion:s,alpha:u,f:1==i||0==o?1:s/(u*o)}},n.findBestK=function(e,t,a){var o,i=r(0),s={},u={},f=1;for(s[f]=i.algorithm(e,f),u[f]=n.f(e,s[f].means,s[f].assignments),console.log(f+" => "+u[f].f),f++;f<t;){s[f]=i.algorithm(e,f);var l=n.f(e,s[f].means,s[f].assignments,u[f-1].alpha,u[f-1].distortion);a&&a({K:l.K,f:l.f}),u[f]=l,console.log(f+" => "+u[f].f),f++}var c,h=Number.MAX_VALUE,v={};for(var d in u){var g=u[d];v[d]=g.f,g.f<h&&(h=g.f,o=g.K,c=s[d].means)}return{f:v,K:o,means:c}}}])});