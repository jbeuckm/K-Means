!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["kmeans-js"]=r():e["kmeans-js"]=r()}(global,function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=1)}([function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t,a=(t=n(2))&&t.__esModule?t:{default:t};var o=function(e,r,n){if(e.length!=r.length)throw"points and assignments arrays must be of same dimension";for(var t=0,a=n.length;t<a;t++){for(var o=[],u=0,f=r.length;u<f;u++)r[u]==t&&o.push(e[u]);o.length>0&&(n[t]=i(o))}return n},i=function(e){for(var r=e[0].slice(0),n=e.length,t=1;t<n;t++)for(var a=e[t],o=0,i=a.length;o<i;o++)r[o]+=a[o];for(var u=0,f=r.length;u<f;u++)r[u]/=n;return r},u=function(e,r){if(e.length!=r.length)throw"old and new assignment arrays must be of same dimension";for(var n=0,t=0,a=e.length;t<a;t++)e[t]!=r[t]&&n++;return n},f=function(e,r){for(var n=[],t=0,a=e.length;t<a;t++)n.push(s(e[t],r));return n},s=function(e,r){for(var n=[],t=0,a=r.length;t<a;t++)n.push(c(e,r[t]));return l(n)},l=function(e){for(var r=e[0],n=0,t=1,a=e.length;t<a;t++)e[t]<r&&(n=t,r=e[t]);return n},c=function(e,r){return Math.sqrt(d(e,r))},d=function(e,r){if(e.length!=r.length)throw"point1 and point2 must be of same dimension";for(var n=e.length,t=0,a=0;a<n;a++)t+=(e[a]-r[a])*(e[a]-r[a]);return t},v={averagePosition:i,algorithm:function(e,r,n){for(var t=[],a=0;a<r;a++){var i=e[Math.floor(Math.random()*e.length)];t.push(i.slice(0))}var s,l,c=f(e,t),d=0;do{o(e,c,t),s=c,c=f(e,t),l=u(c,s),n&&n(l,d),d++}while(l>0);return{means:t,assignments:c,steps:d}},distance:c,findClosestMean:s,generateRandomPoints:function(e,r){a.default.init(e,4,1);for(var n=[],t=0;t<r;t++){var o=a.default.generatePoint();n.push(o)}return n},findIndexOfMinimum:l,assignPointsToMeans:f,moveMeansToCenters:o,countChangedAssignments:u,findAverageMeanSeparation:function(e){for(var r=0,n=0,t=e.length,a=0;a<t-1;a++)for(var o=a+1;o<t;o++)r+=c(e[a],e[o]),n++;return r/n},findRanges:function(e){for(var r=e[0],n=e.length,t=r.length,a=[],o=0;o<t;o++)a[o]=[r[o],r[o]];for(var i=1;i<n;i++){var u=e[i];for(o=0;o<t;o++)u[o]<a[o][0]&&(a[o][0]=u[o]),u[o]>a[o][1]&&(a[o][1]=u[o])}return a},countPointsPerMean:function(e){for(var r={},n=0,t=e.length;n<t;n++){var a=e[n];r[a]?r[a]++:r[a]=1}return r}};r.default=v},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"dataset",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"phamBestK",{enumerable:!0,get:function(){return o.default}}),r.default=void 0;var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};t.get||t.set?Object.defineProperty(r,n,t):r[n]=e[n]}return r.default=e,r}(n(0)),a=i(n(3)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var u=t.default;r.default=u},function(e,r,n){"use strict";function t(e,r,n,t,a){var o,i;do{i=0;for(var u=0;u<a;u++)i+=e+Math.random()*Number.MAX_VALUE%(r-e);i<0&&(i-=a-1),o=i/a}while(!(n<=o&&o<t));return o}var a;function o(e,r){for(var n=[],t=0,a=e.length;t<a;t++){var o=e[t],i=o[1]-o[0],u=o[0]+Math.random()*i,f=i/2+Math.random()*i/2*r,s={bmin:u-f/2,bmax:u+f/2,rmin:u-f/2,rmax:u+f/2,height:3};n.push(s)}return n}r.init=function(e,r,n){var t=n||1;a=[];for(var i=0;i<r;i++){var u=o(e,t);a.push(u)}return a},r.generateClusterCurveDescriptions=o,r.genrand=t,r.generatePoint=function(e){if(!a)return null;e||(e=Math.floor(Math.random()*a.length));for(var r=a[e],n=[],o=0,i=r.length;o<i;o++){var u=r[o];n.push(t(u.bmin,u.bmax,u.rmin,u.rmax,u.height))}return n}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t={normalize:function(e,r){for(var n=[],t=0,a=e.length;t<a;t++){var o=e[t],i=[];for(var u in o){var f=o[u],s=r[u];switch(s.type){case"discrete":for(var l=0,c=s.values.length;l<c;l++)s.values[l]==f?i.push(1):i.push(0);break;case"linear":i.push((f-s.min)/s.range)}}n.push(i)}return n},findRanges:function(e,r){for(var n={},t=0,a=r.length;t<a;t++){var o=r[t];for(var i in o){if(!n.hasOwnProperty(i)){var u={type:e[i]||"linear"};switch(u.type){case"discrete":u.values=[];break;case"linear":u.min=Number.MAX_VALUE,u.max=Number.MIN_VALUE}n[i]=u}var f=n[i],s=o[i];switch(f.type){case"discrete":-1==f.values.indexOf(s)&&f.values.push(s);break;case"linear":s>f.max&&(f.max=s),s<f.min&&(f.min=s)}}}for(var t in n)switch(n[t].type){case"linear":n[t].range=n[t].max-n[t].min}return n},denormalizeDatum:function(e,r){var n={},t=0;for(var a in r){var o,i=e[t],u=r[a];switch(u.type){case"discrete":for(var f=u.values.length,s=e.slice(t,t+f),l=-1,c=Number.MIN_VALUE,d=0;d<f;d++)s[d]>c&&(c=s[d],l=d);o=u.values[l],t+=f;break;case"linear":o=u.min+i*u.range,t+=1}n[a]=o}return n}};r.default=t},function(e,r,n){"use strict";var t,a=(t=n(0))&&t.__esModule?t:{default:t};r.squaredError=function(e,r){if(e.length!=r.length)throw"point1 and point2 must be of same dimension";for(var n=e.length,t=0,a=0;a<n;a++)t+=(e[a]-r[a])*(e[a]-r[a]);return t},r.clusterDistortions=function(e,n,t){for(var a={},o=0,i=e.length;o<i;o++){var u=t[o];a.hasOwnProperty(u)||(a[u]=0),a[u]+=r.squaredError(e[o],n[u])}return a},r.totalDistortion=function(e,n,t){var a=r.clusterDistortions(e,n,t),o=0;for(var i in a)o+=a[i];return o},r.alpha=function(e,r){var n=e[0].length,t=e.length;if(!(t<2||n<=1))return 2==t?1-3/(4*n):r+(1-r)/6},r.f=function(e,n,t,a,o){var i=n.length,u=r.totalDistortion(e,n,t),f=r.alpha(n,a);return{K:i,distortion:u,alpha:f,f:1==i||0==o?1:u/(f*o)}},r.findBestK=function(e,n,t){var o,i={},u={},f=1;for(i[f]=a.default.algorithm(e,f),u[f]=r.f(e,i[f].means,i[f].assignments),console.log(f+" => "+u[f].f),f++;f<n;){i[f]=a.default.algorithm(e,f);var s=r.f(e,i[f].means,i[f].assignments,u[f-1].alpha,u[f-1].distortion);t&&t({K:s.K,f:s.f}),u[f]=s,console.log(f+" => "+u[f].f),f++}var l,c=Number.MAX_VALUE,d={};for(var v in u){var h=u[v];d[v]=h.f,h.f<c&&(c=h.f,o=h.K,l=i[v].means)}return{f:d,K:o,means:l}}}])});